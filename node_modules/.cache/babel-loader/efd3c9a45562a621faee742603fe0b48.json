{"ast":null,"code":"/**\n * Copyright (c) 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule DraftEditorContents.react\n * @typechecks\n * \n */\n'use strict';\n\nvar _assign = require('object-assign');\n\nvar _extends = _assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar DraftEditorBlock = require('./DraftEditorBlock.react');\n\nvar DraftOffsetKey = require('./DraftOffsetKey');\n\nvar EditorState = require('./EditorState');\n\nvar React = require('react');\n\nvar cx = require('fbjs/lib/cx');\n\nvar joinClasses = require('fbjs/lib/joinClasses');\n\nvar nullthrows = require('fbjs/lib/nullthrows');\n/**\n * `DraftEditorContents` is the container component for all block components\n * rendered for a `DraftEditor`. It is optimized to aggressively avoid\n * re-rendering blocks whenever possible.\n *\n * This component is separate from `DraftEditor` because certain props\n * (for instance, ARIA props) must be allowed to update without affecting\n * the contents of the editor.\n */\n\n\nvar DraftEditorContents = function (_React$Component) {\n  _inherits(DraftEditorContents, _React$Component);\n\n  function DraftEditorContents() {\n    _classCallCheck(this, DraftEditorContents);\n\n    return _possibleConstructorReturn(this, _React$Component.apply(this, arguments));\n  }\n\n  DraftEditorContents.prototype.shouldComponentUpdate = function shouldComponentUpdate(nextProps) {\n    var prevEditorState = this.props.editorState;\n    var nextEditorState = nextProps.editorState;\n    var prevDirectionMap = prevEditorState.getDirectionMap();\n    var nextDirectionMap = nextEditorState.getDirectionMap(); // Text direction has changed for one or more blocks. We must re-render.\n\n    if (prevDirectionMap !== nextDirectionMap) {\n      return true;\n    }\n\n    var didHaveFocus = prevEditorState.getSelection().getHasFocus();\n    var nowHasFocus = nextEditorState.getSelection().getHasFocus();\n\n    if (didHaveFocus !== nowHasFocus) {\n      return true;\n    }\n\n    var nextNativeContent = nextEditorState.getNativelyRenderedContent();\n    var wasComposing = prevEditorState.isInCompositionMode();\n    var nowComposing = nextEditorState.isInCompositionMode(); // If the state is unchanged or we're currently rendering a natively\n    // rendered state, there's nothing new to be done.\n\n    if (prevEditorState === nextEditorState || nextNativeContent !== null && nextEditorState.getCurrentContent() === nextNativeContent || wasComposing && nowComposing) {\n      return false;\n    }\n\n    var prevContent = prevEditorState.getCurrentContent();\n    var nextContent = nextEditorState.getCurrentContent();\n    var prevDecorator = prevEditorState.getDecorator();\n    var nextDecorator = nextEditorState.getDecorator();\n    return wasComposing !== nowComposing || prevContent !== nextContent || prevDecorator !== nextDecorator || nextEditorState.mustForceSelection();\n  };\n\n  DraftEditorContents.prototype.render = function render() {\n    var _props = this.props,\n        blockRenderMap = _props.blockRenderMap,\n        blockRendererFn = _props.blockRendererFn,\n        customStyleMap = _props.customStyleMap,\n        customStyleFn = _props.customStyleFn,\n        editorState = _props.editorState;\n    var content = editorState.getCurrentContent();\n    var selection = editorState.getSelection();\n    var forceSelection = editorState.mustForceSelection();\n    var decorator = editorState.getDecorator();\n    var directionMap = nullthrows(editorState.getDirectionMap());\n    var blocksAsArray = content.getBlocksAsArray();\n    var processedBlocks = [];\n    var currentDepth = null;\n    var lastWrapperTemplate = null;\n\n    for (var ii = 0; ii < blocksAsArray.length; ii++) {\n      var _block = blocksAsArray[ii];\n\n      var key = _block.getKey();\n\n      var blockType = _block.getType();\n\n      var customRenderer = blockRendererFn(_block);\n      var CustomComponent = void 0,\n          customProps = void 0,\n          customEditable = void 0;\n\n      if (customRenderer) {\n        CustomComponent = customRenderer.component;\n        customProps = customRenderer.props;\n        customEditable = customRenderer.editable;\n      }\n\n      var _textDirectionality = this.props.textDirectionality;\n      var direction = _textDirectionality ? _textDirectionality : directionMap.get(key);\n      var offsetKey = DraftOffsetKey.encode(key, 0, 0);\n      var componentProps = {\n        contentState: content,\n        block: _block,\n        blockProps: customProps,\n        customStyleMap: customStyleMap,\n        customStyleFn: customStyleFn,\n        decorator: decorator,\n        direction: direction,\n        forceSelection: forceSelection,\n        key: key,\n        offsetKey: offsetKey,\n        selection: selection,\n        tree: editorState.getBlockTree(key)\n      };\n      var configForType = blockRenderMap.get(blockType) || blockRenderMap.get('unstyled');\n      var wrapperTemplate = configForType.wrapper;\n      var Element = configForType.element || blockRenderMap.get('unstyled').element;\n\n      var depth = _block.getDepth();\n\n      var className = this.props.blockStyleFn(_block); // List items are special snowflakes, since we handle nesting and\n      // counters manually.\n\n      if (Element === 'li') {\n        var shouldResetCount = lastWrapperTemplate !== wrapperTemplate || currentDepth === null || depth > currentDepth;\n        className = joinClasses(className, getListItemClasses(blockType, depth, shouldResetCount, direction));\n      }\n\n      var Component = CustomComponent || DraftEditorBlock;\n      var childProps = {\n        className: className,\n        'data-block': true,\n\n        /* $FlowFixMe(>=0.53.0 site=www,mobile) This comment suppresses an\n         * error when upgrading Flow's support for React. Common errors found\n         * when upgrading Flow's React support are documented at\n         * https://fburl.com/eq7bs81w */\n        'data-editor': this.props.editorKey,\n        'data-offset-key': offsetKey,\n        key: key\n      };\n\n      if (customEditable !== undefined) {\n        childProps = _extends({}, childProps, {\n          contentEditable: customEditable,\n          suppressContentEditableWarning: true\n        });\n      }\n\n      var child = React.createElement(Element, childProps,\n      /* $FlowFixMe(>=0.53.0 site=www,mobile) This comment suppresses an\n       * error when upgrading Flow's support for React. Common errors found\n       * when upgrading Flow's React support are documented at\n       * https://fburl.com/eq7bs81w */\n      React.createElement(Component, componentProps));\n      processedBlocks.push({\n        block: child,\n        wrapperTemplate: wrapperTemplate,\n        key: key,\n        offsetKey: offsetKey\n      });\n\n      if (wrapperTemplate) {\n        currentDepth = _block.getDepth();\n      } else {\n        currentDepth = null;\n      }\n\n      lastWrapperTemplate = wrapperTemplate;\n    } // Group contiguous runs of blocks that have the same wrapperTemplate\n\n\n    var outputBlocks = [];\n\n    for (var _ii = 0; _ii < processedBlocks.length;) {\n      var info = processedBlocks[_ii];\n\n      if (info.wrapperTemplate) {\n        var blocks = [];\n\n        do {\n          blocks.push(processedBlocks[_ii].block);\n          _ii++;\n        } while (_ii < processedBlocks.length && processedBlocks[_ii].wrapperTemplate === info.wrapperTemplate);\n\n        var wrapperElement = React.cloneElement(info.wrapperTemplate, {\n          key: info.key + '-wrap',\n          'data-offset-key': info.offsetKey\n        }, blocks);\n        outputBlocks.push(wrapperElement);\n      } else {\n        outputBlocks.push(info.block);\n        _ii++;\n      }\n    }\n\n    return React.createElement('div', {\n      'data-contents': 'true'\n    }, outputBlocks);\n  };\n\n  return DraftEditorContents;\n}(React.Component);\n/**\n * Provide default styling for list items. This way, lists will be styled with\n * proper counters and indentation even if the caller does not specify\n * their own styling at all. If more than five levels of nesting are needed,\n * the necessary CSS classes can be provided via `blockStyleFn` configuration.\n */\n\n\nfunction getListItemClasses(type, depth, shouldResetCount, direction) {\n  return cx({\n    'public/DraftStyleDefault/unorderedListItem': type === 'unordered-list-item',\n    'public/DraftStyleDefault/orderedListItem': type === 'ordered-list-item',\n    'public/DraftStyleDefault/reset': shouldResetCount,\n    'public/DraftStyleDefault/depth0': depth === 0,\n    'public/DraftStyleDefault/depth1': depth === 1,\n    'public/DraftStyleDefault/depth2': depth === 2,\n    'public/DraftStyleDefault/depth3': depth === 3,\n    'public/DraftStyleDefault/depth4': depth === 4,\n    'public/DraftStyleDefault/listLTR': direction === 'LTR',\n    'public/DraftStyleDefault/listRTL': direction === 'RTL'\n  });\n}\n\nmodule.exports = DraftEditorContents;","map":{"version":3,"sources":["/Users/zhengjie/Documents/Fulltime/nba_app/node_modules/draft-js/lib/DraftEditorContents.react.js"],"names":["_assign","require","_extends","target","i","arguments","length","source","key","Object","prototype","hasOwnProperty","call","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","DraftEditorBlock","DraftOffsetKey","EditorState","React","cx","joinClasses","nullthrows","DraftEditorContents","_React$Component","apply","shouldComponentUpdate","nextProps","prevEditorState","props","editorState","nextEditorState","prevDirectionMap","getDirectionMap","nextDirectionMap","didHaveFocus","getSelection","getHasFocus","nowHasFocus","nextNativeContent","getNativelyRenderedContent","wasComposing","isInCompositionMode","nowComposing","getCurrentContent","prevContent","nextContent","prevDecorator","getDecorator","nextDecorator","mustForceSelection","render","_props","blockRenderMap","blockRendererFn","customStyleMap","customStyleFn","content","selection","forceSelection","decorator","directionMap","blocksAsArray","getBlocksAsArray","processedBlocks","currentDepth","lastWrapperTemplate","ii","_block","getKey","blockType","getType","customRenderer","CustomComponent","customProps","customEditable","component","editable","_textDirectionality","textDirectionality","direction","get","offsetKey","encode","componentProps","contentState","block","blockProps","tree","getBlockTree","configForType","wrapperTemplate","wrapper","Element","element","depth","getDepth","className","blockStyleFn","shouldResetCount","getListItemClasses","Component","childProps","editorKey","undefined","contentEditable","suppressContentEditableWarning","child","createElement","push","outputBlocks","_ii","info","blocks","wrapperElement","cloneElement","type","module","exports"],"mappings":"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","sourcesContent":["/**\n * Copyright (c) 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule DraftEditorContents.react\n * @typechecks\n * \n */\n\n'use strict';\n\nvar _assign = require('object-assign');\n\nvar _extends = _assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar DraftEditorBlock = require('./DraftEditorBlock.react');\nvar DraftOffsetKey = require('./DraftOffsetKey');\nvar EditorState = require('./EditorState');\nvar React = require('react');\n\nvar cx = require('fbjs/lib/cx');\nvar joinClasses = require('fbjs/lib/joinClasses');\nvar nullthrows = require('fbjs/lib/nullthrows');\n\n/**\n * `DraftEditorContents` is the container component for all block components\n * rendered for a `DraftEditor`. It is optimized to aggressively avoid\n * re-rendering blocks whenever possible.\n *\n * This component is separate from `DraftEditor` because certain props\n * (for instance, ARIA props) must be allowed to update without affecting\n * the contents of the editor.\n */\nvar DraftEditorContents = function (_React$Component) {\n  _inherits(DraftEditorContents, _React$Component);\n\n  function DraftEditorContents() {\n    _classCallCheck(this, DraftEditorContents);\n\n    return _possibleConstructorReturn(this, _React$Component.apply(this, arguments));\n  }\n\n  DraftEditorContents.prototype.shouldComponentUpdate = function shouldComponentUpdate(nextProps) {\n    var prevEditorState = this.props.editorState;\n    var nextEditorState = nextProps.editorState;\n\n    var prevDirectionMap = prevEditorState.getDirectionMap();\n    var nextDirectionMap = nextEditorState.getDirectionMap();\n\n    // Text direction has changed for one or more blocks. We must re-render.\n    if (prevDirectionMap !== nextDirectionMap) {\n      return true;\n    }\n\n    var didHaveFocus = prevEditorState.getSelection().getHasFocus();\n    var nowHasFocus = nextEditorState.getSelection().getHasFocus();\n\n    if (didHaveFocus !== nowHasFocus) {\n      return true;\n    }\n\n    var nextNativeContent = nextEditorState.getNativelyRenderedContent();\n\n    var wasComposing = prevEditorState.isInCompositionMode();\n    var nowComposing = nextEditorState.isInCompositionMode();\n\n    // If the state is unchanged or we're currently rendering a natively\n    // rendered state, there's nothing new to be done.\n    if (prevEditorState === nextEditorState || nextNativeContent !== null && nextEditorState.getCurrentContent() === nextNativeContent || wasComposing && nowComposing) {\n      return false;\n    }\n\n    var prevContent = prevEditorState.getCurrentContent();\n    var nextContent = nextEditorState.getCurrentContent();\n    var prevDecorator = prevEditorState.getDecorator();\n    var nextDecorator = nextEditorState.getDecorator();\n    return wasComposing !== nowComposing || prevContent !== nextContent || prevDecorator !== nextDecorator || nextEditorState.mustForceSelection();\n  };\n\n  DraftEditorContents.prototype.render = function render() {\n    var _props = this.props,\n        blockRenderMap = _props.blockRenderMap,\n        blockRendererFn = _props.blockRendererFn,\n        customStyleMap = _props.customStyleMap,\n        customStyleFn = _props.customStyleFn,\n        editorState = _props.editorState;\n\n\n    var content = editorState.getCurrentContent();\n    var selection = editorState.getSelection();\n    var forceSelection = editorState.mustForceSelection();\n    var decorator = editorState.getDecorator();\n    var directionMap = nullthrows(editorState.getDirectionMap());\n\n    var blocksAsArray = content.getBlocksAsArray();\n    var processedBlocks = [];\n    var currentDepth = null;\n    var lastWrapperTemplate = null;\n\n    for (var ii = 0; ii < blocksAsArray.length; ii++) {\n      var _block = blocksAsArray[ii];\n      var key = _block.getKey();\n      var blockType = _block.getType();\n\n      var customRenderer = blockRendererFn(_block);\n      var CustomComponent = void 0,\n          customProps = void 0,\n          customEditable = void 0;\n      if (customRenderer) {\n        CustomComponent = customRenderer.component;\n        customProps = customRenderer.props;\n        customEditable = customRenderer.editable;\n      }\n\n      var _textDirectionality = this.props.textDirectionality;\n\n      var direction = _textDirectionality ? _textDirectionality : directionMap.get(key);\n      var offsetKey = DraftOffsetKey.encode(key, 0, 0);\n      var componentProps = {\n        contentState: content,\n        block: _block,\n        blockProps: customProps,\n        customStyleMap: customStyleMap,\n        customStyleFn: customStyleFn,\n        decorator: decorator,\n        direction: direction,\n        forceSelection: forceSelection,\n        key: key,\n        offsetKey: offsetKey,\n        selection: selection,\n        tree: editorState.getBlockTree(key)\n      };\n\n      var configForType = blockRenderMap.get(blockType) || blockRenderMap.get('unstyled');\n      var wrapperTemplate = configForType.wrapper;\n\n      var Element = configForType.element || blockRenderMap.get('unstyled').element;\n\n      var depth = _block.getDepth();\n      var className = this.props.blockStyleFn(_block);\n\n      // List items are special snowflakes, since we handle nesting and\n      // counters manually.\n      if (Element === 'li') {\n        var shouldResetCount = lastWrapperTemplate !== wrapperTemplate || currentDepth === null || depth > currentDepth;\n        className = joinClasses(className, getListItemClasses(blockType, depth, shouldResetCount, direction));\n      }\n\n      var Component = CustomComponent || DraftEditorBlock;\n      var childProps = {\n        className: className,\n        'data-block': true,\n        /* $FlowFixMe(>=0.53.0 site=www,mobile) This comment suppresses an\n         * error when upgrading Flow's support for React. Common errors found\n         * when upgrading Flow's React support are documented at\n         * https://fburl.com/eq7bs81w */\n        'data-editor': this.props.editorKey,\n        'data-offset-key': offsetKey,\n        key: key\n      };\n      if (customEditable !== undefined) {\n        childProps = _extends({}, childProps, {\n          contentEditable: customEditable,\n          suppressContentEditableWarning: true\n        });\n      }\n\n      var child = React.createElement(Element, childProps,\n      /* $FlowFixMe(>=0.53.0 site=www,mobile) This comment suppresses an\n       * error when upgrading Flow's support for React. Common errors found\n       * when upgrading Flow's React support are documented at\n       * https://fburl.com/eq7bs81w */\n      React.createElement(Component, componentProps));\n\n      processedBlocks.push({\n        block: child,\n        wrapperTemplate: wrapperTemplate,\n        key: key,\n        offsetKey: offsetKey\n      });\n\n      if (wrapperTemplate) {\n        currentDepth = _block.getDepth();\n      } else {\n        currentDepth = null;\n      }\n      lastWrapperTemplate = wrapperTemplate;\n    }\n\n    // Group contiguous runs of blocks that have the same wrapperTemplate\n    var outputBlocks = [];\n    for (var _ii = 0; _ii < processedBlocks.length;) {\n      var info = processedBlocks[_ii];\n      if (info.wrapperTemplate) {\n        var blocks = [];\n        do {\n          blocks.push(processedBlocks[_ii].block);\n          _ii++;\n        } while (_ii < processedBlocks.length && processedBlocks[_ii].wrapperTemplate === info.wrapperTemplate);\n        var wrapperElement = React.cloneElement(info.wrapperTemplate, {\n          key: info.key + '-wrap',\n          'data-offset-key': info.offsetKey\n        }, blocks);\n        outputBlocks.push(wrapperElement);\n      } else {\n        outputBlocks.push(info.block);\n        _ii++;\n      }\n    }\n\n    return React.createElement(\n      'div',\n      { 'data-contents': 'true' },\n      outputBlocks\n    );\n  };\n\n  return DraftEditorContents;\n}(React.Component);\n\n/**\n * Provide default styling for list items. This way, lists will be styled with\n * proper counters and indentation even if the caller does not specify\n * their own styling at all. If more than five levels of nesting are needed,\n * the necessary CSS classes can be provided via `blockStyleFn` configuration.\n */\n\n\nfunction getListItemClasses(type, depth, shouldResetCount, direction) {\n  return cx({\n    'public/DraftStyleDefault/unorderedListItem': type === 'unordered-list-item',\n    'public/DraftStyleDefault/orderedListItem': type === 'ordered-list-item',\n    'public/DraftStyleDefault/reset': shouldResetCount,\n    'public/DraftStyleDefault/depth0': depth === 0,\n    'public/DraftStyleDefault/depth1': depth === 1,\n    'public/DraftStyleDefault/depth2': depth === 2,\n    'public/DraftStyleDefault/depth3': depth === 3,\n    'public/DraftStyleDefault/depth4': depth === 4,\n    'public/DraftStyleDefault/listLTR': direction === 'LTR',\n    'public/DraftStyleDefault/listRTL': direction === 'RTL'\n  });\n}\n\nmodule.exports = DraftEditorContents;"]},"metadata":{},"sourceType":"script"}